---
title: 事件
---

## 事件监听

你可以用 `v-on` 指令监听 DOM 事件，并在触发时运行一些 JavaScript 代码。

```tsx
<button v-on:click="counter += 1">Add 1</button>
<p>The button above has been clicked {{ counter }} times.</p>
```

```tsx
import {Button} from 'ant-design-vue'

<Button @click="counter += 1">Add 1</Button>
<p>The button above has been clicked {{ counter }} times.</p>
```

## 自定义组件的 v-model

当一个组件上使用 `v-model` 时，它会把 `value` 用作 prop 并把 `input` 用作事件：

```tsx
Vue.component('base-checkbox', {
  model: {
    prop: 'checked',
    event: 'change'
  },
  props: {
    checked: Boolean
  },
  template: `
    <input
      type="checkbox"
      v-bind:checked="checked"
      v-on:change="$emit('change', $event.target.checked)"
    >
  `
})
```

现在你可以像这样使用自定义的 `base-checkbox`：

```tsx
<base-checkbox v-model="lovingVue"></base-checkbox>
```

## .sync 修饰符

`.sync` 修饰符是一个语法糖，它会扩展为一个更新父组件绑定值的 `v-on` 侦听器。

```tsx
<!-- 在一个组件里 -->
<my-component :foo.sync="bar"></my-component>

<!-- 等价于 -->
<my-component :foo="bar" @update:foo="val => bar = val"></my-component>
```

## 配合v-model使用

```tsx
<template>
  <div>
    <input v-model="message" />
    <p>message: {{ message }}</p>
    <input v-model="message" />
    <p>message: {{ message }}</p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      message: 'hello',
    };
  },
};
</script>
```

## 组件实现v-model

```tsx
<!-- CustomInput.vue -->
<script setup>
defineProps(['modelValue'])
defineEmits(['update:modelValue'])
</script>

<template>
  <input
    :value="modelValue"
    @input="$emit('update:modelValue', $event.target.value)"
  />
</template>

<CustomInput v-model="searchText" />
```

## 事件修饰符

通过由点 (`.`) 表示的指令后缀来调用修饰符。

### .stop

阻止事件冒泡。

```tsx
<a v-on:click.stop="doThis"></a>
```

## 按键修饰符

在监听键盘事件时，我们经常需要检查详细的按键。Vue 允许为 `v-on` 在监听键盘事件时添加按键修饰符：

```tsx
<!-- 只有在 `key` 是 `Enter` 时调用 `vm.submit()` -->
<input v-on:keyup.enter="submit">
```

## 系统修饰键

在监听键盘事件时，我们经常需要检查详细的按键。Vue 允许为 `v-on` 在监听键盘事件时添加按键修饰符：

```tsx
<!-- Alt + C -->
<input @keyup.alt.67="clear">

<!-- Ctrl + Click -->
<div @click.ctrl="doSomething">Do something</div>
```

## 鼠标按钮修饰符

```tsx
<!-- 只有在 `key` 是 `Enter` 时调用 `vm.submit()` -->
<input v-on:keyup.enter="submit">
```
