---
title: 设计模式
aliases:
tags:
date created: 2022-11-29 14:29:22
date updated: 2022-11-29 16:12:23
---

# 设计模式

## 什么是设计模式

1. 设计模式是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。
2. 使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。
3. 设计模式是对软件设计中普遍存在（反复出现）的各种问题，所提出的解决方案。
4. 设计模式不是某一种特定的编程语言实现的，而是一套思想和原则。

## 设计模式六大原则

1. 单一职责原则
2. 里氏替换原则
3. 依赖倒转原则
4. 接口隔离原则
5. 迪米特法则
6. 开闭原则

### 单一职责原则

1. 定义：一个类只负责一项职责
2. 优点：降低类的复杂度、提高类的可读性、提高系统的可维护性、变更引起的风险降低
3. 缺点：增加类的个数、增加系统的复杂度
4. 适用场景：只有逻辑足够简单，才可以在代码级违反单一职责原则；只有类中方法数量足够少，可以在方法级别保持单一职责原则

### 里氏替换原则

1. 定义：所有引用基类的地方必须能透明地使用其子类的对象
2. 优点：可以在运行时判断任意一个实例对象是否是某个类的实例
3. 缺点：增加了代码的复杂度
4. 适用场景：只有当子类可以替换掉所有父类的出现的地方，父类才能真正被复用，而且子类还能增加父类的新功能

### 依赖倒转原则

1. 定义：高层模块不应该依赖底层模块，两者都应该依赖其抽象；抽象不应该依赖细节，细节应该依赖抽象
2. 优点：可以减少类间的耦合性，提高系统的稳定性，提高代码的可读性和可维护性，降低变更引起的风险
3. 缺点：增加了系统的复杂度和理解难度
4. 适用场景：在系统中尽量使用面向接口编程，而不是面向实现编程

### 接口隔离原则

1. 定义：使用多个专门的接口，而不使用单一的总接口，客户端不应该依赖它不需要的接口
2. 优点：可以提高代码的可读性和可维护性，降低变更引起的风险
3. 缺点：增加了系统的复杂度和理解难度
4. 适用场景：在系统中尽量使用面向接口编程，而不是面向实现编程

### 迪米特法则

1. 定义：一个对象应该对其他对象保持最少的了解
2. 优点：降低类之间的耦合度，提高系统的稳定性，提高代码的可读性和可维护性，降低变更引起的风险
3. 缺点：增加了系统的复杂度和理解难度
4. 适用场景：在系统中尽量使用面向接口编程，而不是面向实现编程

### 开闭原则

1. 定义：一个软件实体如类、模块和函数应该对扩展开放，对修改关闭
2. 优点：可以提高代码的可读性和可维护性，降低变更引起的风险
3. 缺点：增加了系统的复杂度和理解难度
4. 适用场景：在系统中尽量使用面向接口编程，而不是面向实现编程

## 设计模式和类型

### 创建型模式

1. 单例模式(Singleton)
  - 定义：保证一个类仅有一个实例，并提供一个访问它的全局访问点
  - 优点：在内存中只有一个实例，减少了内存开销；可以避免对资源的多重占用；设置全局访问点，严格控制访问
  - 缺点：没有接口，扩展困难
  - 适用场景：要求生产唯一序列号的环境；在整个项目中需要一个共享访问点或共享数据；创建一个对象需要消耗的资源过多，如要访问IO和数据库等资源
  - 代码示例：[单例模式]
2. 工厂模式(Factory)
  - 定义：定义一个用于创建对象的接口，让子类决定实例化哪一个类，工厂方法使一个类的实例化延迟到其子类
  - 优点：用户只需要关心所需产品对应的工厂，无需关心创建细节；加入新产品符合开闭原则，提高了系统的可扩展性
  - 缺点：类的个数容易过多，增加复杂度；增加了系统的抽象性和理解难度
  - 适用场景：创建对象需要大量重复的代码；客户端不依赖于产品类实例如何被创建、实现等细节；一个类通过其子类来指定创建哪个对象
  - 代码示例：[工厂模式]
3. 抽象工厂模式(Abstract Factory)
4. 建造者模式(Builder)
5. 原型模式(Prototype)

### 结构型模式

1. 适配器模式(Adapter)
2. 桥接模式(Bridge)
3. 装饰器模式(Decorator)
4. 组合模式(Composite)
5. 外观模式(Facade)
6. 享元模式(Flyweight)
7. 代理模式(Proxy)

### 行为型模式

1. 模板方法模式(Template Method)
2. 命令模式(Command)
3. 迭代器模式(Iterator)
4. 观察者模式(Observer)
5. 中介者模式(Mediator)
6. 备忘录模式(Memento)
7. 状态模式(State)
8. 策略模式(Strategy)
9. 职责链模式(Chain of Responsibility)
10. 解释器模式(Interpreter)
11. 访问者模式(Visitor)
12. 发布订阅模式(Publish/Subscribe)

### 其他模式

1. MVC模式
2. MVVM模式
