---
aliases: [同源策略网络, 浏览器跨域]
tags: [浏览器跨域]
date created: 2022-06-20 21:17:45
date updated: 2022-12-29 16:12:45
title: 同源策略网络
---

# 浏览器跨域

## 同源策略网络

| 说明           | 是否允许通讯 |
| ------------ | ------ |
| 同一域名，不同文件或路径 | 允许     |
| 同一域名，不同端口    | 不允许    |
| 同一域名，不同协议    | 不允许    |
| 域名和域名对应 ip   | 不允许    |
| 域相同，子域不同     | 不允许    |
| 不同域名         | 不允许    |

## 跨域通信方式

### JSONP

JSONP 是 JSON with Padding 的缩写，它是一种跨域通信的方式。JSONP 的原理是利用 `<script>` 标签没有跨域限制的漏洞，通过 `<script>` 标签指向一个需要访问的地址并提供一个回调函数来接收数据。

```html
// index.html
<script>
  function callback(data) {
    console.log(data);
  }
</script>
<script src="http://localhost:3000/api?callback=callback"></script>
```

```ts
// server.ts
import express from 'express';

const app = express();

app.get('/api', (req, res) => {
  const { callback } = req.query;
  res.send(`${callback}({ name: 'JSONP' })`);
});

app.listen(3000, () => {
  console.log('server is running at http://localhost:3000');
});
```
