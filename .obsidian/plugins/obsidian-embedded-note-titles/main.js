/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var state = require('@codemirror/state');
var view = require('@codemirror/view');
var obsidian = require('obsidian');

const ELEMENT_RE = /[\w-]+/g;
const ID_RE = /#[\w-]+/g;
const CLASS_RE = /\.[\w-]+/g;
const ATTR_RE = /\[[^\]]+\]/g;
const PSEUDO_CLASSES_RE = /\:(?!not)[\w-]+(\(.*\))?/g;
const PSEUDO_ELEMENTS_RE = /\:\:?(after|before|first-letter|first-line|selection)/g;
// convert an array-like object to array
function toArray(list) {
    return [].slice.call(list);
}
// handles extraction of `cssRules` as an `Array` from a stylesheet or something that behaves the same
function getSheetRules(stylesheet) {
    var sheet_media = stylesheet.media && stylesheet.media.mediaText;
    // if this sheet is disabled skip it
    if (stylesheet.disabled)
        return [];
    // if this sheet's media is specified and doesn't match the viewport then skip it
    if (sheet_media &&
        sheet_media.length &&
        !window.matchMedia(sheet_media).matches)
        return [];
    // get the style rules of this sheet
    return toArray(stylesheet.cssRules);
}
function _find(string, re) {
    var matches = string.match(re);
    return matches ? matches.length : 0;
}
// calculates the specificity of a given `selector`
function calculateScore(selector) {
    var score = [0, 0, 0], parts = selector.split(" "), part, match;
    //TODO: clean the ':not' part since the last ELEMENT_RE will pick it up
    while (((part = parts.shift()), typeof part == "string")) {
        // find all pseudo-elements
        match = _find(part, PSEUDO_ELEMENTS_RE);
        score[2] += match;
        // and remove them
        match && (part = part.replace(PSEUDO_ELEMENTS_RE, ""));
        // find all pseudo-classes
        match = _find(part, PSEUDO_CLASSES_RE);
        score[1] += match;
        // and remove them
        match && (part = part.replace(PSEUDO_CLASSES_RE, ""));
        // find all attributes
        match = _find(part, ATTR_RE);
        score[1] += match;
        // and remove them
        match && (part = part.replace(ATTR_RE, ""));
        // find all IDs
        match = _find(part, ID_RE);
        score[0] += match;
        // and remove them
        match && (part = part.replace(ID_RE, ""));
        // find all classes
        match = _find(part, CLASS_RE);
        score[1] += match;
        // and remove them
        match && (part = part.replace(CLASS_RE, ""));
        // find all elements
        score[2] += _find(part, ELEMENT_RE);
    }
    return parseInt(score.join(""), 10);
}
// returns the heights possible specificity score an element can get from a give rule's selectorText
function getSpecificityScore(element, selectorText) {
    var selectors = selectorText.split(","), selector, score, result = 0;
    while ((selector = selectors.shift())) {
        if (element.matches(selector)) {
            score = calculateScore(selector);
            result = score > result ? score : result;
        }
    }
    return result;
}
function sortBySpecificity(element, rules) {
    // comparing function that sorts CSSStyleRules according to specificity of their `selectorText`
    function compareSpecificity(a, b) {
        let aScore = getSpecificityScore(element, a.selectorText);
        let bScore = getSpecificityScore(element, b.selectorText);
        // If the styles come from app.css, they take a lower priority
        if (aScore === bScore) {
            if (a.parentStyleSheet.href)
                aScore -= 1;
            if (b.parentStyleSheet.href)
                bScore -= 1;
        }
        return (aScore -
            bScore);
    }
    return rules.sort(compareSpecificity);
}
function getMatchedCSSRules(element) {
    let styleSheets = toArray(window.document.styleSheets);
    let sheet;
    let rules;
    let rule;
    let result = [];
    // assuming the browser hands us stylesheets in order of appearance
    // we iterate them from the beginning to follow proper cascade order
    while ((sheet = styleSheets.shift())) {
        // get the style rules of this sheet
        rules = getSheetRules(sheet);
        // loop the rules in order of appearance
        while ((rule = rules.shift())) {
            // if this is an @import rule
            if (rule.styleSheet) {
                // insert the imported stylesheet's rules at the beginning of this stylesheet's rules
                rules = getSheetRules(rule.styleSheet).concat(rules);
                // and skip this rule
                continue;
            }
            // if there's no stylesheet attribute BUT there IS a media attribute it's a media rule
            else if (rule.media) {
                // insert the contained rules of this media rule to the beginning of this stylesheet's rules
                rules = getSheetRules(rule).concat(rules);
                // and skip it
                continue;
            }
            // check if this element matches this rule's selector
            if (element.matches(rule.selectorText)) {
                // push the rule to the results set
                result.push(rule);
            }
        }
    }
    // sort according to specificity
    return sortBySpecificity(element, result);
}

// Split CSS margin and padding values like `0 auto`, `10px auto 0`, etc.
function getRightLeft(val) {
    if (/\s/.test(val)) {
        const vals = val.split(/\s+/g);
        if (vals.length === 2 || vals.length === 3) {
            return [vals[1], vals[1]];
        }
        if (vals.length === 4) {
            return [vals[1], vals[3]];
        }
    }
    return [val, val];
}
const keyMap = {
    width: "width",
    maxWidth: "max-width",
    margin: "margin",
    marginLeft: "margin-left",
    marginRight: "margin-right",
    padding: "padding",
    paddingLeft: "padding-left",
    paddingRight: "padding-right",
};
// Get the relevant style values from a reference element
function getRefSizing(el) {
    const rules = getMatchedCSSRules(el);
    const sizing = {};
    rules.forEach((r) => {
        const { width, maxWidth, margin, marginLeft, marginRight, padding, paddingLeft, paddingRight, } = r.style;
        if (width) {
            sizing.width = width;
        }
        if (maxWidth) {
            sizing.maxWidth = maxWidth;
        }
        if (margin) {
            const [mRight, mLeft] = getRightLeft(margin);
            sizing.marginLeft = mLeft;
            sizing.marginLeft = mRight;
        }
        if (marginLeft)
            sizing.marginLeft = marginLeft;
        if (marginRight)
            sizing.marginRight = marginRight;
        if (padding) {
            const [pRight, pLeft] = getRightLeft(padding);
            sizing.paddingLeft = pLeft;
            sizing.paddingLeft = pRight;
        }
        if (paddingLeft)
            sizing.paddingLeft = paddingLeft;
        if (paddingRight)
            sizing.paddingRight = paddingRight;
    });
    return sizing;
}
// Apply reference styles to a heading element
function applyRefStyles(heading, ref) {
    if (!ref)
        return;
    for (const key in ref) {
        const val = ref[key];
        if (val) {
            heading.style.setProperty(keyMap[key], val);
        }
    }
}
class LegacyCodemirrorHeadingsManager {
    constructor() {
        this.headings = {};
        this.codeMirrorSizerRef = null;
        this.codeMirrorSizerInvalid = true;
    }
    getCodeMirrorSizerStyles() {
        const sizerEl = document.getElementsByClassName("CodeMirror-sizer");
        const lineEl = document.getElementsByClassName("CodeMirror-line");
        if (sizerEl.length && lineEl.length) {
            const sizer = sizerEl[0];
            const { marginLeft, paddingRight, borderRightWidth } = sizer.style;
            // If codemirror hasn't applied styles to the div yet, let's consider it
            // invalid so we can check it again later
            if (marginLeft !== "0px" && paddingRight !== "0px") {
                this.codeMirrorSizerInvalid = false;
            }
            const inline = {
                marginLeft,
                marginRight: borderRightWidth,
                paddingRight,
            };
            const sizerRef = getRefSizing(sizer);
            const line = lineEl[0];
            const lineRef = getRefSizing(line);
            // Combine inline styles with CSS styles
            this.codeMirrorSizerRef = Object.assign(Object.assign({}, inline), sizerRef);
            if (lineRef.paddingLeft) {
                this.codeMirrorSizerRef.paddingLeft = this.codeMirrorSizerRef
                    .paddingLeft
                    ? `calc(${this.codeMirrorSizerRef.paddingLeft} + ${lineRef.paddingLeft})`
                    : lineRef.paddingLeft;
            }
            if (lineRef.paddingRight) {
                this.codeMirrorSizerRef.paddingRight = this.codeMirrorSizerRef
                    .paddingRight
                    ? `calc(${this.codeMirrorSizerRef.paddingRight} + ${lineRef.paddingRight})`
                    : lineRef.paddingRight;
            }
        }
    }
    // Once the codemirror heading styles have been validated, loop through and update everything
    updateCodeMirrorHeadings() {
        Object.keys(this.headings).forEach((id) => {
            const h1Edit = document.getElementById(`${id}-edit`);
            applyRefStyles(h1Edit, this.codeMirrorSizerRef);
        });
    }
    // Clean up headings once a pane has been closed or the plugin has been disabled
    removeHeading(id) {
        var _a;
        if (!this.headings[id])
            return;
        const h1Edit = document.getElementById(`${id}-edit`);
        if (h1Edit)
            h1Edit.remove();
        (_a = this.headings[id].resizeWatcher) === null || _a === void 0 ? void 0 : _a.disconnect();
        delete this.headings[id].resizeWatcher;
        delete this.headings[id];
    }
    createHeading(id, leaf) {
        var _a, _b;
        // CodeMirror adds margin and padding only after the editor is visible
        if (this.codeMirrorSizerInvalid &&
            ((_a = leaf.getViewState().state) === null || _a === void 0 ? void 0 : _a.mode) === "source") {
            this.getCodeMirrorSizerStyles();
            if (!this.codeMirrorSizerInvalid) {
                this.updateCodeMirrorHeadings();
            }
        }
        if (this.headings[id])
            return;
        const title = (_b = leaf.view.file) === null || _b === void 0 ? void 0 : _b.basename;
        if (!title)
            return;
        const viewContent = leaf.view.containerEl.getElementsByClassName("CodeMirror-scroll");
        const lines = leaf.view.containerEl.getElementsByClassName("CodeMirror-lines");
        if (!this.codeMirrorSizerRef) {
            this.getCodeMirrorSizerStyles();
        }
        if (viewContent.length) {
            // Create the codemirror heading
            const editEl = viewContent[0];
            const h1Edit = document.createElement("h1");
            applyRefStyles(h1Edit, this.codeMirrorSizerRef);
            h1Edit.setText(title);
            h1Edit.id = `${id}-edit`;
            h1Edit.classList.add("embedded-note-title", "embedded-note-title__edit");
            editEl.prepend(h1Edit);
            const onResize = obsidian.debounce((entries) => {
                if (lines.length) {
                    const linesEl = lines[0];
                    const height = Math.ceil(entries[0].borderBoxSize[0].blockSize);
                    linesEl.style.paddingTop = `${height}px`;
                    h1Edit.style.marginBottom = `-${height}px`;
                }
            }, 20, true);
            // We need to push the content down when the pane resizes so the heading
            // doesn't cover the content
            const resizeWatcher = new window.ResizeObserver(onResize);
            resizeWatcher.observe(h1Edit);
            this.headings[id] = { leaf, resizeWatcher };
        }
    }
    // Generate a unique ID for a leaf
    getLeafId(leaf) {
        const viewState = leaf.getViewState();
        if (viewState.type === "markdown") {
            return "title-" + Math.random().toString(36).substr(2, 9);
        }
        return null;
    }
    // Iterate through all leafs and generate headings if needed
    createHeadings(app) {
        const seen = {};
        app.workspace.iterateRootLeaves((leaf) => {
            const id = this.getLeafId(leaf);
            if (id) {
                this.createHeading(id, leaf);
                seen[id] = true;
            }
        });
        Object.keys(this.headings).forEach((id) => {
            if (!seen[id]) {
                this.removeHeading(id);
            }
        });
    }
    cleanup() {
        this.codeMirrorSizerRef = null;
        Object.keys(this.headings).forEach((id) => {
            this.removeHeading(id);
        });
    }
}
class PreviewHeadingsManager {
    constructor() {
        this.headings = {};
        this.previewSizerRef = null;
    }
    getPreviewSizerStyles() {
        const el = document.getElementsByClassName("markdown-preview-sizer");
        if (el.length) {
            this.previewSizerRef = getRefSizing(el[0]);
        }
    }
    // Clean up headings once a pane has been closed or the plugin has been disabled
    removeHeading(id) {
        if (!this.headings[id])
            return;
        const h1Preview = document.getElementById(`${id}-preview`);
        if (h1Preview)
            h1Preview.remove();
        delete this.headings[id];
    }
    createHeading(id, leaf) {
        var _a;
        if (this.headings[id])
            return;
        const title = (_a = leaf.view.file) === null || _a === void 0 ? void 0 : _a.basename;
        if (!title)
            return;
        const previewContent = leaf.view.containerEl.getElementsByClassName("markdown-preview-view");
        if (!this.previewSizerRef) {
            this.getPreviewSizerStyles();
        }
        if (previewContent.length) {
            // Create the preview heading
            const previewEl = previewContent[0];
            const h1Preview = document.createElement("h1");
            applyRefStyles(h1Preview, this.previewSizerRef);
            h1Preview.setText(title);
            h1Preview.id = `${id}-preview`;
            h1Preview.classList.add("embedded-note-title", "embedded-note-title__preview");
            previewEl.prepend(h1Preview);
            this.headings[id] = { leaf };
        }
    }
    // Generate a unique ID for a leaf
    getLeafId(leaf) {
        const viewState = leaf.getViewState();
        if (viewState.type === "markdown") {
            return "title-" + Math.random().toString(36).substr(2, 9);
        }
        return null;
    }
    // Iterate through all leafs and generate headings if needed
    createHeadings(app) {
        const seen = {};
        app.workspace.iterateRootLeaves((leaf) => {
            const id = this.getLeafId(leaf);
            if (id) {
                this.createHeading(id, leaf);
                seen[id] = true;
            }
        });
        Object.keys(this.headings).forEach((id) => {
            if (!seen[id]) {
                this.removeHeading(id);
            }
        });
    }
    cleanup() {
        this.previewSizerRef = null;
        Object.keys(this.headings).forEach((id) => {
            this.removeHeading(id);
        });
    }
}

class HeaderWidget extends view.WidgetType {
    constructor(heading) {
        super();
        this.heading = heading;
    }
    ignoreEvent(_event) {
        return true;
    }
    toDOM() {
        return createEl("h1", {
            text: this.heading,
            cls: "cm-line embedded-note-title embedded-note-title__edit",
        }, (el) => {
            el.addEventListener("click", (e) => {
                e.stopPropagation();
                e.preventDefault();
            }, { capture: true });
        });
    }
}
class EmbeddedNoteTitlesPlugin extends obsidian.Plugin {
    onload() {
        this.app.workspace.trigger("parse-style-settings");
        document.body.classList.add("embedded-note-titles");
        this.previewHeadingsManager = new PreviewHeadingsManager();
        if (this.app.vault.getConfig("legacyEditor")) {
            this.legacyCodemirrorHeadingsManager =
                new LegacyCodemirrorHeadingsManager();
        }
        else {
            const updateTitle = state.StateEffect.define();
            this.registerEditorExtension([
                state.StateField.define({
                    create(state) {
                        var _a;
                        const view$1 = state.field(obsidian.editorViewField);
                        return view.Decoration.set(view.Decoration.replace({
                            block: true,
                            widget: new HeaderWidget(((_a = view$1.file) === null || _a === void 0 ? void 0 : _a.basename) || ''),
                        }).range(0, 0));
                    },
                    update(effects, tr) {
                        var _a;
                        for (let e of tr.effects) {
                            if (e.is(updateTitle)) {
                                const view$1 = tr.state.field(obsidian.editorViewField);
                                return view.Decoration.set(view.Decoration.replace({
                                    block: true,
                                    widget: new HeaderWidget(((_a = view$1.file) === null || _a === void 0 ? void 0 : _a.basename) || ''),
                                }).range(0, 0));
                            }
                        }
                        return effects;
                    },
                    provide: (f) => view.EditorView.decorations.from(f),
                })
            ]);
            this.registerEvent(this.app.vault.on("rename", file => {
                const markdownLeaves = this.app.workspace.getLeavesOfType('markdown');
                markdownLeaves.forEach(leaf => {
                    const view = leaf.view;
                    if (view.file === file) {
                        view.editor.cm.dispatch({
                            effects: updateTitle.of(true)
                        });
                    }
                });
            }));
        }
        this.registerEvent(this.app.workspace.on("layout-change", () => {
            setTimeout(() => {
                var _a;
                (_a = this.legacyCodemirrorHeadingsManager) === null || _a === void 0 ? void 0 : _a.createHeadings(this.app);
                this.previewHeadingsManager.createHeadings(this.app);
            }, 0);
        }));
        // Listen for CSS changes so we can recalculate heading styles
        this.registerEvent(this.app.workspace.on("css-change", () => {
            var _a;
            (_a = this.legacyCodemirrorHeadingsManager) === null || _a === void 0 ? void 0 : _a.cleanup();
            this.previewHeadingsManager.cleanup();
            setTimeout(() => {
                var _a;
                (_a = this.legacyCodemirrorHeadingsManager) === null || _a === void 0 ? void 0 : _a.createHeadings(this.app);
                this.previewHeadingsManager.createHeadings(this.app);
            }, 0);
        }));
        this.app.workspace.layoutReady
            ? this.app.workspace.trigger("layout-change")
            : this.app.workspace.onLayoutReady(() => {
                // Trigger layout-change to ensure headings are created when the app loads
                this.app.workspace.trigger("layout-change");
            });
    }
    onunload() {
        var _a;
        document.body.classList.remove("embedded-note-titles");
        (_a = this.legacyCodemirrorHeadingsManager) === null || _a === void 0 ? void 0 : _a.cleanup();
        this.previewHeadingsManager.cleanup();
    }
}

module.exports = EmbeddedNoteTitlesPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsic3JjL2dldE1hdGNoZWRDU1NSdWxlcy50cyIsInNyYy9IZWFkaW5nc01hbmFnZXIudHMiLCJzcmMvbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFTEVNRU5UX1JFID0gL1tcXHctXSsvZztcbmNvbnN0IElEX1JFID0gLyNbXFx3LV0rL2c7XG5jb25zdCBDTEFTU19SRSA9IC9cXC5bXFx3LV0rL2c7XG5jb25zdCBBVFRSX1JFID0gL1xcW1teXFxdXStcXF0vZztcbmNvbnN0IFBTRVVET19DTEFTU0VTX1JFID0gL1xcOig/IW5vdClbXFx3LV0rKFxcKC4qXFwpKT8vZztcbmNvbnN0IFBTRVVET19FTEVNRU5UU19SRSA9IC9cXDpcXDo/KGFmdGVyfGJlZm9yZXxmaXJzdC1sZXR0ZXJ8Zmlyc3QtbGluZXxzZWxlY3Rpb24pL2c7XG5cbi8vIGNvbnZlcnQgYW4gYXJyYXktbGlrZSBvYmplY3QgdG8gYXJyYXlcbmZ1bmN0aW9uIHRvQXJyYXkobGlzdDogYW55KSB7XG4gIHJldHVybiBbXS5zbGljZS5jYWxsKGxpc3QpO1xufVxuXG4vLyBoYW5kbGVzIGV4dHJhY3Rpb24gb2YgYGNzc1J1bGVzYCBhcyBhbiBgQXJyYXlgIGZyb20gYSBzdHlsZXNoZWV0IG9yIHNvbWV0aGluZyB0aGF0IGJlaGF2ZXMgdGhlIHNhbWVcbmZ1bmN0aW9uIGdldFNoZWV0UnVsZXMoc3R5bGVzaGVldDogQ1NTU3R5bGVTaGVldCkge1xuICB2YXIgc2hlZXRfbWVkaWEgPSBzdHlsZXNoZWV0Lm1lZGlhICYmIHN0eWxlc2hlZXQubWVkaWEubWVkaWFUZXh0O1xuICAvLyBpZiB0aGlzIHNoZWV0IGlzIGRpc2FibGVkIHNraXAgaXRcbiAgaWYgKHN0eWxlc2hlZXQuZGlzYWJsZWQpIHJldHVybiBbXTtcbiAgLy8gaWYgdGhpcyBzaGVldCdzIG1lZGlhIGlzIHNwZWNpZmllZCBhbmQgZG9lc24ndCBtYXRjaCB0aGUgdmlld3BvcnQgdGhlbiBza2lwIGl0XG4gIGlmIChcbiAgICBzaGVldF9tZWRpYSAmJlxuICAgIHNoZWV0X21lZGlhLmxlbmd0aCAmJlxuICAgICF3aW5kb3cubWF0Y2hNZWRpYShzaGVldF9tZWRpYSkubWF0Y2hlc1xuICApXG4gICAgcmV0dXJuIFtdO1xuICAvLyBnZXQgdGhlIHN0eWxlIHJ1bGVzIG9mIHRoaXMgc2hlZXRcbiAgcmV0dXJuIHRvQXJyYXkoc3R5bGVzaGVldC5jc3NSdWxlcyk7XG59XG5cbmZ1bmN0aW9uIF9maW5kKHN0cmluZzogc3RyaW5nLCByZTogUmVnRXhwKSB7XG4gIHZhciBtYXRjaGVzID0gc3RyaW5nLm1hdGNoKHJlKTtcbiAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzLmxlbmd0aCA6IDA7XG59XG5cbi8vIGNhbGN1bGF0ZXMgdGhlIHNwZWNpZmljaXR5IG9mIGEgZ2l2ZW4gYHNlbGVjdG9yYFxuZnVuY3Rpb24gY2FsY3VsYXRlU2NvcmUoc2VsZWN0b3I6IHN0cmluZykge1xuICB2YXIgc2NvcmUgPSBbMCwgMCwgMF0sXG4gICAgcGFydHMgPSBzZWxlY3Rvci5zcGxpdChcIiBcIiksXG4gICAgcGFydCxcbiAgICBtYXRjaDtcbiAgLy9UT0RPOiBjbGVhbiB0aGUgJzpub3QnIHBhcnQgc2luY2UgdGhlIGxhc3QgRUxFTUVOVF9SRSB3aWxsIHBpY2sgaXQgdXBcbiAgd2hpbGUgKCgocGFydCA9IHBhcnRzLnNoaWZ0KCkpLCB0eXBlb2YgcGFydCA9PSBcInN0cmluZ1wiKSkge1xuICAgIC8vIGZpbmQgYWxsIHBzZXVkby1lbGVtZW50c1xuICAgIG1hdGNoID0gX2ZpbmQocGFydCwgUFNFVURPX0VMRU1FTlRTX1JFKTtcbiAgICBzY29yZVsyXSArPSBtYXRjaDtcbiAgICAvLyBhbmQgcmVtb3ZlIHRoZW1cbiAgICBtYXRjaCAmJiAocGFydCA9IHBhcnQucmVwbGFjZShQU0VVRE9fRUxFTUVOVFNfUkUsIFwiXCIpKTtcbiAgICAvLyBmaW5kIGFsbCBwc2V1ZG8tY2xhc3Nlc1xuICAgIG1hdGNoID0gX2ZpbmQocGFydCwgUFNFVURPX0NMQVNTRVNfUkUpO1xuICAgIHNjb3JlWzFdICs9IG1hdGNoO1xuICAgIC8vIGFuZCByZW1vdmUgdGhlbVxuICAgIG1hdGNoICYmIChwYXJ0ID0gcGFydC5yZXBsYWNlKFBTRVVET19DTEFTU0VTX1JFLCBcIlwiKSk7XG4gICAgLy8gZmluZCBhbGwgYXR0cmlidXRlc1xuICAgIG1hdGNoID0gX2ZpbmQocGFydCwgQVRUUl9SRSk7XG4gICAgc2NvcmVbMV0gKz0gbWF0Y2g7XG4gICAgLy8gYW5kIHJlbW92ZSB0aGVtXG4gICAgbWF0Y2ggJiYgKHBhcnQgPSBwYXJ0LnJlcGxhY2UoQVRUUl9SRSwgXCJcIikpO1xuICAgIC8vIGZpbmQgYWxsIElEc1xuICAgIG1hdGNoID0gX2ZpbmQocGFydCwgSURfUkUpO1xuICAgIHNjb3JlWzBdICs9IG1hdGNoO1xuICAgIC8vIGFuZCByZW1vdmUgdGhlbVxuICAgIG1hdGNoICYmIChwYXJ0ID0gcGFydC5yZXBsYWNlKElEX1JFLCBcIlwiKSk7XG4gICAgLy8gZmluZCBhbGwgY2xhc3Nlc1xuICAgIG1hdGNoID0gX2ZpbmQocGFydCwgQ0xBU1NfUkUpO1xuICAgIHNjb3JlWzFdICs9IG1hdGNoO1xuICAgIC8vIGFuZCByZW1vdmUgdGhlbVxuICAgIG1hdGNoICYmIChwYXJ0ID0gcGFydC5yZXBsYWNlKENMQVNTX1JFLCBcIlwiKSk7XG4gICAgLy8gZmluZCBhbGwgZWxlbWVudHNcbiAgICBzY29yZVsyXSArPSBfZmluZChwYXJ0LCBFTEVNRU5UX1JFKTtcbiAgfVxuICByZXR1cm4gcGFyc2VJbnQoc2NvcmUuam9pbihcIlwiKSwgMTApO1xufVxuXG4vLyByZXR1cm5zIHRoZSBoZWlnaHRzIHBvc3NpYmxlIHNwZWNpZmljaXR5IHNjb3JlIGFuIGVsZW1lbnQgY2FuIGdldCBmcm9tIGEgZ2l2ZSBydWxlJ3Mgc2VsZWN0b3JUZXh0XG5mdW5jdGlvbiBnZXRTcGVjaWZpY2l0eVNjb3JlKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzZWxlY3RvclRleHQ6IHN0cmluZykge1xuICB2YXIgc2VsZWN0b3JzID0gc2VsZWN0b3JUZXh0LnNwbGl0KFwiLFwiKSxcbiAgICBzZWxlY3RvcixcbiAgICBzY29yZSxcbiAgICByZXN1bHQgPSAwO1xuXG4gIHdoaWxlICgoc2VsZWN0b3IgPSBzZWxlY3RvcnMuc2hpZnQoKSkpIHtcbiAgICBpZiAoZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSkge1xuICAgICAgc2NvcmUgPSBjYWxjdWxhdGVTY29yZShzZWxlY3Rvcik7XG4gICAgICByZXN1bHQgPSBzY29yZSA+IHJlc3VsdCA/IHNjb3JlIDogcmVzdWx0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHNvcnRCeVNwZWNpZmljaXR5KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBydWxlczogQ1NTU3R5bGVSdWxlW10pIHtcbiAgLy8gY29tcGFyaW5nIGZ1bmN0aW9uIHRoYXQgc29ydHMgQ1NTU3R5bGVSdWxlcyBhY2NvcmRpbmcgdG8gc3BlY2lmaWNpdHkgb2YgdGhlaXIgYHNlbGVjdG9yVGV4dGBcbiAgZnVuY3Rpb24gY29tcGFyZVNwZWNpZmljaXR5KGE6IENTU1N0eWxlUnVsZSwgYjogQ1NTU3R5bGVSdWxlKSB7XG4gICAgbGV0IGFTY29yZSA9IGdldFNwZWNpZmljaXR5U2NvcmUoZWxlbWVudCwgYS5zZWxlY3RvclRleHQpO1xuICAgIGxldCBiU2NvcmUgPSBnZXRTcGVjaWZpY2l0eVNjb3JlKGVsZW1lbnQsIGIuc2VsZWN0b3JUZXh0KTtcblxuICAgIC8vIElmIHRoZSBzdHlsZXMgY29tZSBmcm9tIGFwcC5jc3MsIHRoZXkgdGFrZSBhIGxvd2VyIHByaW9yaXR5XG4gICAgaWYgKGFTY29yZSA9PT0gYlNjb3JlKSB7XG4gICAgICBpZiAoYS5wYXJlbnRTdHlsZVNoZWV0LmhyZWYpIGFTY29yZSAtPSAxO1xuICAgICAgaWYgKGIucGFyZW50U3R5bGVTaGVldC5ocmVmKSBiU2NvcmUgLT0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgYVNjb3JlIC1cbiAgICAgIGJTY29yZVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gcnVsZXMuc29ydChjb21wYXJlU3BlY2lmaWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF0Y2hlZENTU1J1bGVzKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogQ1NTU3R5bGVSdWxlW10ge1xuICBsZXQgc3R5bGVTaGVldHMgPSB0b0FycmF5KHdpbmRvdy5kb2N1bWVudC5zdHlsZVNoZWV0cylcbiAgbGV0IHNoZWV0O1xuICBsZXQgcnVsZXM7XG4gIGxldCBydWxlO1xuICBsZXQgcmVzdWx0OiBDU1NTdHlsZVJ1bGVbXSA9IFtdO1xuXG4gIC8vIGFzc3VtaW5nIHRoZSBicm93c2VyIGhhbmRzIHVzIHN0eWxlc2hlZXRzIGluIG9yZGVyIG9mIGFwcGVhcmFuY2VcbiAgLy8gd2UgaXRlcmF0ZSB0aGVtIGZyb20gdGhlIGJlZ2lubmluZyB0byBmb2xsb3cgcHJvcGVyIGNhc2NhZGUgb3JkZXJcbiAgd2hpbGUgKChzaGVldCA9IHN0eWxlU2hlZXRzLnNoaWZ0KCkpKSB7XG4gICAgLy8gZ2V0IHRoZSBzdHlsZSBydWxlcyBvZiB0aGlzIHNoZWV0XG4gICAgcnVsZXMgPSBnZXRTaGVldFJ1bGVzKHNoZWV0KTtcbiAgICAvLyBsb29wIHRoZSBydWxlcyBpbiBvcmRlciBvZiBhcHBlYXJhbmNlXG4gICAgd2hpbGUgKChydWxlID0gcnVsZXMuc2hpZnQoKSkpIHtcbiAgICAgIC8vIGlmIHRoaXMgaXMgYW4gQGltcG9ydCBydWxlXG4gICAgICBpZiAocnVsZS5zdHlsZVNoZWV0KSB7XG4gICAgICAgIC8vIGluc2VydCB0aGUgaW1wb3J0ZWQgc3R5bGVzaGVldCdzIHJ1bGVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhpcyBzdHlsZXNoZWV0J3MgcnVsZXNcbiAgICAgICAgcnVsZXMgPSBnZXRTaGVldFJ1bGVzKHJ1bGUuc3R5bGVTaGVldCkuY29uY2F0KHJ1bGVzKTtcbiAgICAgICAgLy8gYW5kIHNraXAgdGhpcyBydWxlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gaWYgdGhlcmUncyBubyBzdHlsZXNoZWV0IGF0dHJpYnV0ZSBCVVQgdGhlcmUgSVMgYSBtZWRpYSBhdHRyaWJ1dGUgaXQncyBhIG1lZGlhIHJ1bGVcbiAgICAgIGVsc2UgaWYgKHJ1bGUubWVkaWEpIHtcbiAgICAgICAgLy8gaW5zZXJ0IHRoZSBjb250YWluZWQgcnVsZXMgb2YgdGhpcyBtZWRpYSBydWxlIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhpcyBzdHlsZXNoZWV0J3MgcnVsZXNcbiAgICAgICAgcnVsZXMgPSBnZXRTaGVldFJ1bGVzKHJ1bGUpLmNvbmNhdChydWxlcyk7XG4gICAgICAgIC8vIGFuZCBza2lwIGl0XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBpZiB0aGlzIGVsZW1lbnQgbWF0Y2hlcyB0aGlzIHJ1bGUncyBzZWxlY3RvclxuICAgICAgaWYgKGVsZW1lbnQubWF0Y2hlcyhydWxlLnNlbGVjdG9yVGV4dCkpIHtcbiAgICAgICAgLy8gcHVzaCB0aGUgcnVsZSB0byB0aGUgcmVzdWx0cyBzZXRcbiAgICAgICAgcmVzdWx0LnB1c2gocnVsZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIHNvcnQgYWNjb3JkaW5nIHRvIHNwZWNpZmljaXR5XG4gIHJldHVybiBzb3J0QnlTcGVjaWZpY2l0eShlbGVtZW50LCByZXN1bHQpO1xufVxuIiwiaW1wb3J0IHsgQXBwLCBXb3Jrc3BhY2VMZWFmLCBkZWJvdW5jZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgZ2V0TWF0Y2hlZENTU1J1bGVzIH0gZnJvbSBcIi4vZ2V0TWF0Y2hlZENTU1J1bGVzXCI7XG5cbmludGVyZmFjZSBSZWZTaXppbmcge1xuICB3aWR0aD86IHN0cmluZztcbiAgbWF4V2lkdGg/OiBzdHJpbmc7XG4gIG1hcmdpbkxlZnQ/OiBzdHJpbmc7XG4gIG1hcmdpblJpZ2h0Pzogc3RyaW5nO1xuICBwYWRkaW5nTGVmdD86IHN0cmluZztcbiAgcGFkZGluZ1JpZ2h0Pzogc3RyaW5nO1xufVxuXG4vLyBTcGxpdCBDU1MgbWFyZ2luIGFuZCBwYWRkaW5nIHZhbHVlcyBsaWtlIGAwIGF1dG9gLCBgMTBweCBhdXRvIDBgLCBldGMuXG5mdW5jdGlvbiBnZXRSaWdodExlZnQodmFsOiBzdHJpbmcpIHtcbiAgaWYgKC9cXHMvLnRlc3QodmFsKSkge1xuICAgIGNvbnN0IHZhbHMgPSB2YWwuc3BsaXQoL1xccysvZyk7XG5cbiAgICBpZiAodmFscy5sZW5ndGggPT09IDIgfHwgdmFscy5sZW5ndGggPT09IDMpIHtcbiAgICAgIHJldHVybiBbdmFsc1sxXSwgdmFsc1sxXV07XG4gICAgfVxuXG4gICAgaWYgKHZhbHMubGVuZ3RoID09PSA0KSB7XG4gICAgICByZXR1cm4gW3ZhbHNbMV0sIHZhbHNbM11dO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbdmFsLCB2YWxdO1xufVxuXG5jb25zdCBrZXlNYXA6IHsgW2s6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICB3aWR0aDogXCJ3aWR0aFwiLFxuICBtYXhXaWR0aDogXCJtYXgtd2lkdGhcIixcbiAgbWFyZ2luOiBcIm1hcmdpblwiLFxuICBtYXJnaW5MZWZ0OiBcIm1hcmdpbi1sZWZ0XCIsXG4gIG1hcmdpblJpZ2h0OiBcIm1hcmdpbi1yaWdodFwiLFxuICBwYWRkaW5nOiBcInBhZGRpbmdcIixcbiAgcGFkZGluZ0xlZnQ6IFwicGFkZGluZy1sZWZ0XCIsXG4gIHBhZGRpbmdSaWdodDogXCJwYWRkaW5nLXJpZ2h0XCIsXG59O1xuXG4vLyBHZXQgdGhlIHJlbGV2YW50IHN0eWxlIHZhbHVlcyBmcm9tIGEgcmVmZXJlbmNlIGVsZW1lbnRcbmZ1bmN0aW9uIGdldFJlZlNpemluZyhlbDogSFRNTEVsZW1lbnQpIHtcbiAgY29uc3QgcnVsZXMgPSBnZXRNYXRjaGVkQ1NTUnVsZXMoZWwpO1xuICBjb25zdCBzaXppbmc6IFJlZlNpemluZyA9IHt9O1xuXG4gIHJ1bGVzLmZvckVhY2goKHIpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICB3aWR0aCxcbiAgICAgIG1heFdpZHRoLFxuICAgICAgbWFyZ2luLFxuICAgICAgbWFyZ2luTGVmdCxcbiAgICAgIG1hcmdpblJpZ2h0LFxuICAgICAgcGFkZGluZyxcbiAgICAgIHBhZGRpbmdMZWZ0LFxuICAgICAgcGFkZGluZ1JpZ2h0LFxuICAgIH0gPSByLnN0eWxlO1xuXG4gICAgaWYgKHdpZHRoKSB7XG4gICAgICBzaXppbmcud2lkdGggPSB3aWR0aDtcbiAgICB9XG5cbiAgICBpZiAobWF4V2lkdGgpIHtcbiAgICAgIHNpemluZy5tYXhXaWR0aCA9IG1heFdpZHRoO1xuICAgIH1cblxuICAgIGlmIChtYXJnaW4pIHtcbiAgICAgIGNvbnN0IFttUmlnaHQsIG1MZWZ0XSA9IGdldFJpZ2h0TGVmdChtYXJnaW4pO1xuICAgICAgc2l6aW5nLm1hcmdpbkxlZnQgPSBtTGVmdDtcbiAgICAgIHNpemluZy5tYXJnaW5MZWZ0ID0gbVJpZ2h0O1xuICAgIH1cblxuICAgIGlmIChtYXJnaW5MZWZ0KSBzaXppbmcubWFyZ2luTGVmdCA9IG1hcmdpbkxlZnQ7XG4gICAgaWYgKG1hcmdpblJpZ2h0KSBzaXppbmcubWFyZ2luUmlnaHQgPSBtYXJnaW5SaWdodDtcblxuICAgIGlmIChwYWRkaW5nKSB7XG4gICAgICBjb25zdCBbcFJpZ2h0LCBwTGVmdF0gPSBnZXRSaWdodExlZnQocGFkZGluZyk7XG4gICAgICBzaXppbmcucGFkZGluZ0xlZnQgPSBwTGVmdDtcbiAgICAgIHNpemluZy5wYWRkaW5nTGVmdCA9IHBSaWdodDtcbiAgICB9XG5cbiAgICBpZiAocGFkZGluZ0xlZnQpIHNpemluZy5wYWRkaW5nTGVmdCA9IHBhZGRpbmdMZWZ0O1xuICAgIGlmIChwYWRkaW5nUmlnaHQpIHNpemluZy5wYWRkaW5nUmlnaHQgPSBwYWRkaW5nUmlnaHQ7XG4gIH0pO1xuXG4gIHJldHVybiBzaXppbmc7XG59XG5cbi8vIEFwcGx5IHJlZmVyZW5jZSBzdHlsZXMgdG8gYSBoZWFkaW5nIGVsZW1lbnRcbmZ1bmN0aW9uIGFwcGx5UmVmU3R5bGVzKGhlYWRpbmc6IEhUTUxFbGVtZW50LCByZWY6IFJlZlNpemluZyB8IG51bGwpIHtcbiAgaWYgKCFyZWYpIHJldHVybjtcbiAgXG4gIGZvciAoY29uc3Qga2V5IGluIHJlZikge1xuICAgIGNvbnN0IHZhbCA9IHJlZltrZXkgYXMga2V5b2YgUmVmU2l6aW5nXTtcblxuICAgIGlmICh2YWwpIHtcbiAgICAgIGhlYWRpbmcuc3R5bGUuc2V0UHJvcGVydHkoa2V5TWFwW2tleV0sIHZhbCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMZWdhY3lDb2RlbWlycm9ySGVhZGluZ3NNYW5hZ2VyIHtcbiAgaGVhZGluZ3M6IHtcbiAgICBbaWQ6IHN0cmluZ106IHtcbiAgICAgIGxlYWY6IFdvcmtzcGFjZUxlYWY7XG4gICAgICByZXNpemVXYXRjaGVyPzogUmVzaXplT2JzZXJ2ZXI7XG4gICAgfTtcbiAgfSA9IHt9O1xuXG4gIGNvZGVNaXJyb3JTaXplclJlZjogUmVmU2l6aW5nIHwgbnVsbCA9IG51bGw7XG4gIGNvZGVNaXJyb3JTaXplckludmFsaWQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIGdldENvZGVNaXJyb3JTaXplclN0eWxlcygpIHtcbiAgICBjb25zdCBzaXplckVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIkNvZGVNaXJyb3Itc2l6ZXJcIik7XG4gICAgY29uc3QgbGluZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIkNvZGVNaXJyb3ItbGluZVwiKTtcblxuICAgIGlmIChzaXplckVsLmxlbmd0aCAmJiBsaW5lRWwubGVuZ3RoKSB7XG4gICAgICBjb25zdCBzaXplciA9IHNpemVyRWxbMF0gYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgIGNvbnN0IHsgbWFyZ2luTGVmdCwgcGFkZGluZ1JpZ2h0LCBib3JkZXJSaWdodFdpZHRoIH0gPSBzaXplci5zdHlsZTtcblxuICAgICAgLy8gSWYgY29kZW1pcnJvciBoYXNuJ3QgYXBwbGllZCBzdHlsZXMgdG8gdGhlIGRpdiB5ZXQsIGxldCdzIGNvbnNpZGVyIGl0XG4gICAgICAvLyBpbnZhbGlkIHNvIHdlIGNhbiBjaGVjayBpdCBhZ2FpbiBsYXRlclxuICAgICAgaWYgKG1hcmdpbkxlZnQgIT09IFwiMHB4XCIgJiYgcGFkZGluZ1JpZ2h0ICE9PSBcIjBweFwiKSB7XG4gICAgICAgIHRoaXMuY29kZU1pcnJvclNpemVySW52YWxpZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbmxpbmU6IFJlZlNpemluZyA9IHtcbiAgICAgICAgbWFyZ2luTGVmdCxcbiAgICAgICAgbWFyZ2luUmlnaHQ6IGJvcmRlclJpZ2h0V2lkdGgsXG4gICAgICAgIHBhZGRpbmdSaWdodCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHNpemVyUmVmID0gZ2V0UmVmU2l6aW5nKHNpemVyKTtcblxuICAgICAgY29uc3QgbGluZSA9IGxpbmVFbFswXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGNvbnN0IGxpbmVSZWYgPSBnZXRSZWZTaXppbmcobGluZSk7XG5cbiAgICAgIC8vIENvbWJpbmUgaW5saW5lIHN0eWxlcyB3aXRoIENTUyBzdHlsZXNcbiAgICAgIHRoaXMuY29kZU1pcnJvclNpemVyUmVmID0ge1xuICAgICAgICAuLi5pbmxpbmUsXG4gICAgICAgIC4uLnNpemVyUmVmLFxuICAgICAgfTtcblxuICAgICAgaWYgKGxpbmVSZWYucGFkZGluZ0xlZnQpIHtcbiAgICAgICAgdGhpcy5jb2RlTWlycm9yU2l6ZXJSZWYucGFkZGluZ0xlZnQgPSB0aGlzLmNvZGVNaXJyb3JTaXplclJlZlxuICAgICAgICAgIC5wYWRkaW5nTGVmdFxuICAgICAgICAgID8gYGNhbGMoJHt0aGlzLmNvZGVNaXJyb3JTaXplclJlZi5wYWRkaW5nTGVmdH0gKyAke2xpbmVSZWYucGFkZGluZ0xlZnR9KWBcbiAgICAgICAgICA6IGxpbmVSZWYucGFkZGluZ0xlZnQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChsaW5lUmVmLnBhZGRpbmdSaWdodCkge1xuICAgICAgICB0aGlzLmNvZGVNaXJyb3JTaXplclJlZi5wYWRkaW5nUmlnaHQgPSB0aGlzLmNvZGVNaXJyb3JTaXplclJlZlxuICAgICAgICAgIC5wYWRkaW5nUmlnaHRcbiAgICAgICAgICA/IGBjYWxjKCR7dGhpcy5jb2RlTWlycm9yU2l6ZXJSZWYucGFkZGluZ1JpZ2h0fSArICR7bGluZVJlZi5wYWRkaW5nUmlnaHR9KWBcbiAgICAgICAgICA6IGxpbmVSZWYucGFkZGluZ1JpZ2h0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIE9uY2UgdGhlIGNvZGVtaXJyb3IgaGVhZGluZyBzdHlsZXMgaGF2ZSBiZWVuIHZhbGlkYXRlZCwgbG9vcCB0aHJvdWdoIGFuZCB1cGRhdGUgZXZlcnl0aGluZ1xuICB1cGRhdGVDb2RlTWlycm9ySGVhZGluZ3MoKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5oZWFkaW5ncykuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGNvbnN0IGgxRWRpdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lkfS1lZGl0YCk7XG4gICAgICBhcHBseVJlZlN0eWxlcyhoMUVkaXQsIHRoaXMuY29kZU1pcnJvclNpemVyUmVmKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENsZWFuIHVwIGhlYWRpbmdzIG9uY2UgYSBwYW5lIGhhcyBiZWVuIGNsb3NlZCBvciB0aGUgcGx1Z2luIGhhcyBiZWVuIGRpc2FibGVkXG4gIHJlbW92ZUhlYWRpbmcoaWQ6IHN0cmluZykge1xuICAgIGlmICghdGhpcy5oZWFkaW5nc1tpZF0pIHJldHVybjtcblxuICAgIGNvbnN0IGgxRWRpdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lkfS1lZGl0YCk7XG5cbiAgICBpZiAoaDFFZGl0KSBoMUVkaXQucmVtb3ZlKCk7XG5cbiAgICB0aGlzLmhlYWRpbmdzW2lkXS5yZXNpemVXYXRjaGVyPy5kaXNjb25uZWN0KCk7XG5cbiAgICBkZWxldGUgdGhpcy5oZWFkaW5nc1tpZF0ucmVzaXplV2F0Y2hlcjtcbiAgICBkZWxldGUgdGhpcy5oZWFkaW5nc1tpZF07XG4gIH1cblxuICBjcmVhdGVIZWFkaW5nKGlkOiBzdHJpbmcsIGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcbiAgICAvLyBDb2RlTWlycm9yIGFkZHMgbWFyZ2luIGFuZCBwYWRkaW5nIG9ubHkgYWZ0ZXIgdGhlIGVkaXRvciBpcyB2aXNpYmxlXG4gICAgaWYgKFxuICAgICAgdGhpcy5jb2RlTWlycm9yU2l6ZXJJbnZhbGlkICYmXG4gICAgICBsZWFmLmdldFZpZXdTdGF0ZSgpLnN0YXRlPy5tb2RlID09PSBcInNvdXJjZVwiXG4gICAgKSB7XG4gICAgICB0aGlzLmdldENvZGVNaXJyb3JTaXplclN0eWxlcygpO1xuXG4gICAgICBpZiAoIXRoaXMuY29kZU1pcnJvclNpemVySW52YWxpZCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUNvZGVNaXJyb3JIZWFkaW5ncygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhlYWRpbmdzW2lkXSkgcmV0dXJuO1xuXG4gICAgY29uc3QgdGl0bGUgPSAobGVhZi52aWV3IGFzIGFueSkuZmlsZT8uYmFzZW5hbWU7XG5cbiAgICBpZiAoIXRpdGxlKSByZXR1cm47XG5cbiAgICBjb25zdCB2aWV3Q29udGVudCA9XG4gICAgICBsZWFmLnZpZXcuY29udGFpbmVyRWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIkNvZGVNaXJyb3Itc2Nyb2xsXCIpO1xuXG4gICAgY29uc3QgbGluZXMgPVxuICAgICAgbGVhZi52aWV3LmNvbnRhaW5lckVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJDb2RlTWlycm9yLWxpbmVzXCIpO1xuXG4gICAgaWYgKCF0aGlzLmNvZGVNaXJyb3JTaXplclJlZikge1xuICAgICAgdGhpcy5nZXRDb2RlTWlycm9yU2l6ZXJTdHlsZXMoKTtcbiAgICB9XG5cbiAgICBpZiAodmlld0NvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAvLyBDcmVhdGUgdGhlIGNvZGVtaXJyb3IgaGVhZGluZ1xuICAgICAgY29uc3QgZWRpdEVsID0gdmlld0NvbnRlbnRbMF0gYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICBjb25zdCBoMUVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG5cbiAgICAgIGFwcGx5UmVmU3R5bGVzKGgxRWRpdCwgdGhpcy5jb2RlTWlycm9yU2l6ZXJSZWYpO1xuXG4gICAgICBoMUVkaXQuc2V0VGV4dCh0aXRsZSk7XG4gICAgICBoMUVkaXQuaWQgPSBgJHtpZH0tZWRpdGA7XG4gICAgICBoMUVkaXQuY2xhc3NMaXN0LmFkZChcImVtYmVkZGVkLW5vdGUtdGl0bGVcIiwgXCJlbWJlZGRlZC1ub3RlLXRpdGxlX19lZGl0XCIpO1xuICAgICAgZWRpdEVsLnByZXBlbmQoaDFFZGl0KTtcblxuICAgICAgY29uc3Qgb25SZXNpemUgPSBkZWJvdW5jZShcbiAgICAgICAgKGVudHJpZXM6IGFueSkgPT4ge1xuICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzRWwgPSBsaW5lc1swXSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGguY2VpbChlbnRyaWVzWzBdLmJvcmRlckJveFNpemVbMF0uYmxvY2tTaXplKTtcblxuICAgICAgICAgICAgbGluZXNFbC5zdHlsZS5wYWRkaW5nVG9wID0gYCR7aGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIGgxRWRpdC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBgLSR7aGVpZ2h0fXB4YDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIDIwLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuXG4gICAgICAvLyBXZSBuZWVkIHRvIHB1c2ggdGhlIGNvbnRlbnQgZG93biB3aGVuIHRoZSBwYW5lIHJlc2l6ZXMgc28gdGhlIGhlYWRpbmdcbiAgICAgIC8vIGRvZXNuJ3QgY292ZXIgdGhlIGNvbnRlbnRcbiAgICAgIGNvbnN0IHJlc2l6ZVdhdGNoZXIgPSBuZXcgKHdpbmRvdyBhcyBhbnkpLlJlc2l6ZU9ic2VydmVyKG9uUmVzaXplKTtcblxuICAgICAgcmVzaXplV2F0Y2hlci5vYnNlcnZlKGgxRWRpdCk7XG5cbiAgICAgIHRoaXMuaGVhZGluZ3NbaWRdID0geyBsZWFmLCByZXNpemVXYXRjaGVyIH07XG4gICAgfVxuICB9XG5cbiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgSUQgZm9yIGEgbGVhZlxuICBnZXRMZWFmSWQobGVhZjogV29ya3NwYWNlTGVhZikge1xuICAgIGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XG5cbiAgICBpZiAodmlld1N0YXRlLnR5cGUgPT09IFwibWFya2Rvd25cIikge1xuICAgICAgcmV0dXJuIFwidGl0bGUtXCIgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBJdGVyYXRlIHRocm91Z2ggYWxsIGxlYWZzIGFuZCBnZW5lcmF0ZSBoZWFkaW5ncyBpZiBuZWVkZWRcbiAgY3JlYXRlSGVhZGluZ3MoYXBwOiBBcHApIHtcbiAgICBjb25zdCBzZWVuOiB7IFtrOiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcblxuICAgIGFwcC53b3Jrc3BhY2UuaXRlcmF0ZVJvb3RMZWF2ZXMoKGxlYWYpID0+IHtcbiAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRMZWFmSWQobGVhZik7XG5cbiAgICAgIGlmIChpZCkge1xuICAgICAgICB0aGlzLmNyZWF0ZUhlYWRpbmcoaWQsIGxlYWYpO1xuICAgICAgICBzZWVuW2lkXSA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLmhlYWRpbmdzKS5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgaWYgKCFzZWVuW2lkXSkge1xuICAgICAgICB0aGlzLnJlbW92ZUhlYWRpbmcoaWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY2xlYW51cCgpIHtcbiAgICB0aGlzLmNvZGVNaXJyb3JTaXplclJlZiA9IG51bGw7XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLmhlYWRpbmdzKS5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgdGhpcy5yZW1vdmVIZWFkaW5nKGlkKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUHJldmlld0hlYWRpbmdzTWFuYWdlciB7XG4gIGhlYWRpbmdzOiB7XG4gICAgW2lkOiBzdHJpbmddOiB7XG4gICAgICBsZWFmOiBXb3Jrc3BhY2VMZWFmO1xuICAgIH07XG4gIH0gPSB7fTtcblxuICBwcmV2aWV3U2l6ZXJSZWY6IFJlZlNpemluZyB8IG51bGwgPSBudWxsO1xuXG4gIGdldFByZXZpZXdTaXplclN0eWxlcygpIHtcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYXJrZG93bi1wcmV2aWV3LXNpemVyXCIpO1xuXG4gICAgaWYgKGVsLmxlbmd0aCkge1xuICAgICAgdGhpcy5wcmV2aWV3U2l6ZXJSZWYgPSBnZXRSZWZTaXppbmcoZWxbMF0gYXMgSFRNTEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFuIHVwIGhlYWRpbmdzIG9uY2UgYSBwYW5lIGhhcyBiZWVuIGNsb3NlZCBvciB0aGUgcGx1Z2luIGhhcyBiZWVuIGRpc2FibGVkXG4gIHJlbW92ZUhlYWRpbmcoaWQ6IHN0cmluZykge1xuICAgIGlmICghdGhpcy5oZWFkaW5nc1tpZF0pIHJldHVybjtcblxuICAgIGNvbnN0IGgxUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lkfS1wcmV2aWV3YCk7XG5cbiAgICBpZiAoaDFQcmV2aWV3KSBoMVByZXZpZXcucmVtb3ZlKCk7XG5cbiAgICBkZWxldGUgdGhpcy5oZWFkaW5nc1tpZF07XG4gIH1cblxuICBjcmVhdGVIZWFkaW5nKGlkOiBzdHJpbmcsIGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcbiAgICBpZiAodGhpcy5oZWFkaW5nc1tpZF0pIHJldHVybjtcblxuICAgIGNvbnN0IHRpdGxlID0gKGxlYWYudmlldyBhcyBhbnkpLmZpbGU/LmJhc2VuYW1lO1xuXG4gICAgaWYgKCF0aXRsZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgcHJldmlld0NvbnRlbnQgPSBsZWFmLnZpZXcuY29udGFpbmVyRWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcbiAgICAgIFwibWFya2Rvd24tcHJldmlldy12aWV3XCJcbiAgICApO1xuXG4gICAgaWYgKCF0aGlzLnByZXZpZXdTaXplclJlZikge1xuICAgICAgdGhpcy5nZXRQcmV2aWV3U2l6ZXJTdHlsZXMoKTtcbiAgICB9XG5cbiAgICBpZiAocHJldmlld0NvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAvLyBDcmVhdGUgdGhlIHByZXZpZXcgaGVhZGluZ1xuICAgICAgY29uc3QgcHJldmlld0VsID0gcHJldmlld0NvbnRlbnRbMF0gYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICBjb25zdCBoMVByZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG5cbiAgICAgIGFwcGx5UmVmU3R5bGVzKGgxUHJldmlldywgdGhpcy5wcmV2aWV3U2l6ZXJSZWYpO1xuXG4gICAgICBoMVByZXZpZXcuc2V0VGV4dCh0aXRsZSk7XG4gICAgICBoMVByZXZpZXcuaWQgPSBgJHtpZH0tcHJldmlld2A7XG4gICAgICBoMVByZXZpZXcuY2xhc3NMaXN0LmFkZChcbiAgICAgICAgXCJlbWJlZGRlZC1ub3RlLXRpdGxlXCIsXG4gICAgICAgIFwiZW1iZWRkZWQtbm90ZS10aXRsZV9fcHJldmlld1wiXG4gICAgICApO1xuICAgICAgcHJldmlld0VsLnByZXBlbmQoaDFQcmV2aWV3KTtcblxuICAgICAgdGhpcy5oZWFkaW5nc1tpZF0gPSB7IGxlYWYgfTtcbiAgICB9XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgYSBsZWFmXG4gIGdldExlYWZJZChsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XG4gICAgY29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcblxuICAgIGlmICh2aWV3U3RhdGUudHlwZSA9PT0gXCJtYXJrZG93blwiKSB7XG4gICAgICByZXR1cm4gXCJ0aXRsZS1cIiArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEl0ZXJhdGUgdGhyb3VnaCBhbGwgbGVhZnMgYW5kIGdlbmVyYXRlIGhlYWRpbmdzIGlmIG5lZWRlZFxuICBjcmVhdGVIZWFkaW5ncyhhcHA6IEFwcCkge1xuICAgIGNvbnN0IHNlZW46IHsgW2s6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xuXG4gICAgYXBwLndvcmtzcGFjZS5pdGVyYXRlUm9vdExlYXZlcygobGVhZikgPT4ge1xuICAgICAgY29uc3QgaWQgPSB0aGlzLmdldExlYWZJZChsZWFmKTtcblxuICAgICAgaWYgKGlkKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlSGVhZGluZyhpZCwgbGVhZik7XG4gICAgICAgIHNlZW5baWRdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5rZXlzKHRoaXMuaGVhZGluZ3MpLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICBpZiAoIXNlZW5baWRdKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSGVhZGluZyhpZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjbGVhbnVwKCkge1xuICAgIHRoaXMucHJldmlld1NpemVyUmVmID0gbnVsbDtcblxuICAgIE9iamVjdC5rZXlzKHRoaXMuaGVhZGluZ3MpLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZUhlYWRpbmcoaWQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBFZGl0b3JTdGF0ZSwgU3RhdGVFZmZlY3QsIFN0YXRlRmllbGQsIFRyYW5zYWN0aW9uIH0gZnJvbSBcIkBjb2RlbWlycm9yL3N0YXRlXCI7XHJcbmltcG9ydCB7XHJcbiAgRGVjb3JhdGlvbixcclxuICBEZWNvcmF0aW9uU2V0LFxyXG4gIEVkaXRvclZpZXcsXHJcbiAgV2lkZ2V0VHlwZSxcclxufSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xyXG5pbXBvcnQgeyBlZGl0b3JWaWV3RmllbGQsIE1hcmtkb3duVmlldywgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7XHJcbiAgTGVnYWN5Q29kZW1pcnJvckhlYWRpbmdzTWFuYWdlcixcclxuICBQcmV2aWV3SGVhZGluZ3NNYW5hZ2VyLFxyXG59IGZyb20gXCIuL0hlYWRpbmdzTWFuYWdlclwiO1xyXG5cclxuY2xhc3MgSGVhZGVyV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XHJcbiAgaGVhZGluZzogc3RyaW5nO1xyXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGhlYWRpbmc6IHN0cmluZykge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuaGVhZGluZyA9IGhlYWRpbmc7XHJcbiAgfVxyXG5cclxuICBpZ25vcmVFdmVudChfZXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHRvRE9NKCkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUVsKFxyXG4gICAgICBcImgxXCIsXHJcbiAgICAgIHtcclxuICAgICAgICB0ZXh0OiB0aGlzLmhlYWRpbmcsXHJcbiAgICAgICAgY2xzOiBcImNtLWxpbmUgZW1iZWRkZWQtbm90ZS10aXRsZSBlbWJlZGRlZC1ub3RlLXRpdGxlX19lZGl0XCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIChlbCkgPT4ge1xyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgeyBjYXB0dXJlOiB0cnVlIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1iZWRkZWROb3RlVGl0bGVzUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICBsZWdhY3lDb2RlbWlycm9ySGVhZGluZ3NNYW5hZ2VyOiBMZWdhY3lDb2RlbWlycm9ySGVhZGluZ3NNYW5hZ2VyO1xyXG4gIHByZXZpZXdIZWFkaW5nc01hbmFnZXI6IFByZXZpZXdIZWFkaW5nc01hbmFnZXI7XHJcblxyXG4gIG9ubG9hZCgpIHtcclxuICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwicGFyc2Utc3R5bGUtc2V0dGluZ3NcIik7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJlbWJlZGRlZC1ub3RlLXRpdGxlc1wiKTtcclxuXHJcbiAgICB0aGlzLnByZXZpZXdIZWFkaW5nc01hbmFnZXIgPSBuZXcgUHJldmlld0hlYWRpbmdzTWFuYWdlcigpO1xyXG5cclxuICAgIGlmICgodGhpcy5hcHAudmF1bHQgYXMgYW55KS5nZXRDb25maWcoXCJsZWdhY3lFZGl0b3JcIikpIHtcclxuICAgICAgdGhpcy5sZWdhY3lDb2RlbWlycm9ySGVhZGluZ3NNYW5hZ2VyID1cclxuICAgICAgICBuZXcgTGVnYWN5Q29kZW1pcnJvckhlYWRpbmdzTWFuYWdlcigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgdXBkYXRlVGl0bGUgPSBTdGF0ZUVmZmVjdC5kZWZpbmU8Ym9vbGVhbj4oKTtcclxuXHJcbiAgICAgIHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oW1xyXG4gICAgICAgIFN0YXRlRmllbGQuZGVmaW5lPERlY29yYXRpb25TZXQ+KHtcclxuICAgICAgICAgIGNyZWF0ZShzdGF0ZTogRWRpdG9yU3RhdGUpIHtcclxuICAgICAgICAgICAgY29uc3QgdmlldyA9IHN0YXRlLmZpZWxkKGVkaXRvclZpZXdGaWVsZCk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KFxyXG4gICAgICAgICAgICAgIERlY29yYXRpb24ucmVwbGFjZSh7XHJcbiAgICAgICAgICAgICAgICBibG9jazogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHdpZGdldDogbmV3IEhlYWRlcldpZGdldCh2aWV3LmZpbGU/LmJhc2VuYW1lIHx8ICcnKSxcclxuICAgICAgICAgICAgICB9KS5yYW5nZSgwLCAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHVwZGF0ZShlZmZlY3RzOiBEZWNvcmF0aW9uU2V0LCB0cjogVHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGUuaXModXBkYXRlVGl0bGUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gdHIuc3RhdGUuZmllbGQoZWRpdG9yVmlld0ZpZWxkKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQoXHJcbiAgICAgICAgICAgICAgICAgIERlY29yYXRpb24ucmVwbGFjZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2s6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0OiBuZXcgSGVhZGVyV2lkZ2V0KHZpZXcuZmlsZT8uYmFzZW5hbWUgfHwgJycpLFxyXG4gICAgICAgICAgICAgICAgICB9KS5yYW5nZSgwLCAwKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlZmZlY3RzO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHByb3ZpZGU6IChmKSA9PiBFZGl0b3JWaWV3LmRlY29yYXRpb25zLmZyb20oZiksXHJcbiAgICAgICAgfSlcclxuICAgICAgXSk7XHJcblxyXG4gICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgZmlsZSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWFya2Rvd25MZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xyXG5cclxuICAgICAgICBtYXJrZG93bkxlYXZlcy5mb3JFYWNoKGxlYWYgPT4ge1xyXG4gICAgICAgICAgY29uc3QgdmlldyA9IChsZWFmLnZpZXcgYXMgTWFya2Rvd25WaWV3KTtcclxuXHJcbiAgICAgICAgICBpZiAodmlldy5maWxlID09PSBmaWxlKSB7XHJcbiAgICAgICAgICAgICgodmlldy5lZGl0b3IgYXMgYW55KS5jbSBhcyBFZGl0b3JWaWV3KS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgZWZmZWN0czogdXBkYXRlVGl0bGUub2YodHJ1ZSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9KSlcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5sZWdhY3lDb2RlbWlycm9ySGVhZGluZ3NNYW5hZ2VyPy5jcmVhdGVIZWFkaW5ncyh0aGlzLmFwcCk7XHJcbiAgICAgICAgICB0aGlzLnByZXZpZXdIZWFkaW5nc01hbmFnZXIuY3JlYXRlSGVhZGluZ3ModGhpcy5hcHApO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gZm9yIENTUyBjaGFuZ2VzIHNvIHdlIGNhbiByZWNhbGN1bGF0ZSBoZWFkaW5nIHN0eWxlc1xyXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxyXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJjc3MtY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmxlZ2FjeUNvZGVtaXJyb3JIZWFkaW5nc01hbmFnZXI/LmNsZWFudXAoKTtcclxuICAgICAgICB0aGlzLnByZXZpZXdIZWFkaW5nc01hbmFnZXIuY2xlYW51cCgpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMubGVnYWN5Q29kZW1pcnJvckhlYWRpbmdzTWFuYWdlcj8uY3JlYXRlSGVhZGluZ3ModGhpcy5hcHApO1xyXG4gICAgICAgICAgdGhpcy5wcmV2aWV3SGVhZGluZ3NNYW5hZ2VyLmNyZWF0ZUhlYWRpbmdzKHRoaXMuYXBwKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmxheW91dFJlYWR5XHJcbiAgICAgID8gdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJsYXlvdXQtY2hhbmdlXCIpXHJcbiAgICAgIDogdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG4gICAgICAgICAgLy8gVHJpZ2dlciBsYXlvdXQtY2hhbmdlIHRvIGVuc3VyZSBoZWFkaW5ncyBhcmUgY3JlYXRlZCB3aGVuIHRoZSBhcHAgbG9hZHNcclxuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwibGF5b3V0LWNoYW5nZVwiKTtcclxuICAgICAgICB9KTtcclxuICB9XHJcblxyXG4gIG9udW5sb2FkKCkge1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZW1iZWRkZWQtbm90ZS10aXRsZXNcIik7XHJcblxyXG4gICAgdGhpcy5sZWdhY3lDb2RlbWlycm9ySGVhZGluZ3NNYW5hZ2VyPy5jbGVhbnVwKCk7XHJcbiAgICB0aGlzLnByZXZpZXdIZWFkaW5nc01hbmFnZXIuY2xlYW51cCgpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZGVib3VuY2UiLCJXaWRnZXRUeXBlIiwiUGx1Z2luIiwiU3RhdGVFZmZlY3QiLCJTdGF0ZUZpZWxkIiwidmlldyIsImVkaXRvclZpZXdGaWVsZCIsIkRlY29yYXRpb24iLCJFZGl0b3JWaWV3Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQU0sVUFBVSxHQUFHLFNBQVMsQ0FBQztBQUM3QixNQUFNLEtBQUssR0FBRyxVQUFVLENBQUM7QUFDekIsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDO0FBQzdCLE1BQU0sT0FBTyxHQUFHLGFBQWEsQ0FBQztBQUM5QixNQUFNLGlCQUFpQixHQUFHLDJCQUEyQixDQUFDO0FBQ3RELE1BQU0sa0JBQWtCLEdBQUcsd0RBQXdELENBQUM7QUFFcEY7QUFDQSxTQUFTLE9BQU8sQ0FBQyxJQUFTO0lBQ3hCLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDN0IsQ0FBQztBQUVEO0FBQ0EsU0FBUyxhQUFhLENBQUMsVUFBeUI7SUFDOUMsSUFBSSxXQUFXLEdBQUcsVUFBVSxDQUFDLEtBQUssSUFBSSxVQUFVLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQzs7SUFFakUsSUFBSSxVQUFVLENBQUMsUUFBUTtRQUFFLE9BQU8sRUFBRSxDQUFDOztJQUVuQyxJQUNFLFdBQVc7UUFDWCxXQUFXLENBQUMsTUFBTTtRQUNsQixDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTztRQUV2QyxPQUFPLEVBQUUsQ0FBQzs7SUFFWixPQUFPLE9BQU8sQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDdEMsQ0FBQztBQUVELFNBQVMsS0FBSyxDQUFDLE1BQWMsRUFBRSxFQUFV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
